import tabs from "ChromeApi/tabs";

export const bypassForums = async (url, tabId) => {
  const encodedRedirectUrl = url.searchParams.get("to");
  const redirectUrl = encodedRedirectUrl && atob(encodedRedirectUrl);
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
  if (redirectUrl) {
    await tabs.remove(tabId);
    tabs.create({ url: redirectUrl });
  }
};
